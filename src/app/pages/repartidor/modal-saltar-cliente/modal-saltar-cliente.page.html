<ion-header>
  <ion-toolbar color="danger">
    <ion-title>Saltar Cliente</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cerrar()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  
  <!-- INFO DEL CLIENTE -->
  <ion-card>
    <ion-card-content>
      <h2>{{ clienteRuta.cliente.nombre }}</h2>
      <p>{{ clienteRuta.cliente.negocio || 'Sin negocio' }}</p>
      <p class="direccion-text">
        <ion-icon name="location-outline"></ion-icon>
        {{ clienteRuta.cliente.calle }}, {{ clienteRuta.cliente.colonia }}
      </p>
    </ion-card-content>
  </ion-card>

  <!-- FORMULARIO -->
  <form [formGroup]="formSaltar">
    
    <ion-list>
      <ion-item>
        <ion-select 
          label="Motivo del salto"
          labelPlacement="floating"
          formControlName="motivo"
          interface="action-sheet">
          @for (motivo of motivosSalto; track motivo.valor) {
            <ion-select-option [value]="motivo.valor">
              {{ motivo.texto }}
            </ion-select-option>
          }
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-textarea
          label="Observaciones adicionales (Opcional)"
          labelPlacement="floating"
          formControlName="observaciones"
          rows="3"
          placeholder="Ej. El cliente pidi칩 que regresemos ma침ana a las 2pm">
        </ion-textarea>
      </ion-item>
    </ion-list>

    <!-- ADVERTENCIA -->
    <ion-card color="warning">
      <ion-card-content>
        <ion-icon name="warning-outline"></ion-icon>
        <p>Este cliente ser치 marcado como "saltado" y no se registrar치 venta.</p>
      </ion-card-content>
    </ion-card>

    <!-- BOTONES -->
    <ion-button 
      expand="block" 
      color="danger"
      size="large"
      (click)="saltarCliente()"
      [disabled]="formSaltar.invalid || guardando">
      <ion-icon name="play-skip-forward" slot="start"></ion-icon>
      @if (guardando) {
        Procesando...
      } @else {
        Saltar y Continuar con Siguiente
      }
    </ion-button>

    <ion-button 
      expand="block" 
      fill="outline" 
      (click)="cerrar()">
      Cancelar
    </ion-button>

  </form>

</ion-content>